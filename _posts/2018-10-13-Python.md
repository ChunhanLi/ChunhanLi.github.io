---
layout:     post
title:      Python
subtitle:   Python
date:       2018-10-13
author:     Chunhan Li
header-img: img/post-bg-re-vs-ng2.jpg
catalog: false
tags:
    - python
---

[toc]

## 前言
这个文档用于记录学习中遇到的一些Python的函数，还有一些好用的用法~（经常偶尔遇到一些特别好用的函数，过几天就忘记怎么用了）。主要用于自己的学习，所以简单的函数就稍微注释一下，不仔细写具体作用了。

## 正文
### numpy包
- np.tile (类似的np.hstack np.vstack)
```
np.tile([0,0],5)#1方向重复五次
np.tile([0,0],(3,2))#0方向3 1方向 2
```
- ng.argsort#从左到右 从小到大 返回index 可以增加 reverse = TRUE

- b = np.array([True])
    ~b 是array([False])

### pandas

- pd.read_csv 的几个参数 dtype usecols(提取那几个列) na_values把那些看做NA 初始默认的有一些 具体的看help

```
col = pd.read_csv(filename,dtype={'UNITED':np.int64, 'UGDS':np.float64}, usecols=['UNITID','UGDS'], na_values='PrivacySuppressed')
```

- pd.concat(objs, axis = 0, join = 'outer', ignore_index =None)
  - join 可以是inner or outer
  - keys 标注 数据来自于objs的哪一部分
  - join_axes 会根据参数的轴对齐数据 也就是说 如果a的index是[1,2,3,4] 那么 b只合并他的[1,2,3,4]有点像 sql联结的left right

```
pd.concat([a,b], axis = 0, join = 'inner', join_axes = [a.index])

df.append #默认axis=0

df1.join(df2, how ='left' or 'right','outter','inner',lsuffix='',rsuffix='')

```

- df.eval

```
df.eval('A+B')
df.eval('C = A+B', inplace = TRUE)
df['C'] = df.eval('A+B')
```
- df.transform(func)#作用于列

```
df.transform(lambda x: (x- x.mean())/x.std())
```

- df.query()

```
df.query('price >100')
df.query('city =='Davis'')
```

- df.groupby(by,axis,level#multiindex) 可以iterate

```
a=df.groupby(level = 0)## 0表示 第一个index 1表示 第一第二个一起
b=df.groupby(['A','B'])#label
a.mean()

fgb = flights.groupby(level=0)
fgi = iter(fgb)
i, df = next(fgi)
print(i)
df.head()
```

- series.value_counts()#像R里面的table

- pd.qcut(x,q,labels)##基于quantile切分 equal size
  pd.cut(x,q,labels)##区间等距离

- df.columns.str.(..) .tolist()
  series.str
  df[A > 0.03].index.values.tolist()

- columns.str.replace('A','B')#默认输入模式都是正则表达式，有个参数可以调整是否是正则表达式

- DF.columns 输出index形式
  DF.columns.values 输出array形式

### 其他
- 自动创建空字典

```
from collections import defaultdict
dict1 = defaultdict(lambda : 0)
```

- operator.itemgetter

```
dict2={'a':13,'d':31,'df':3}
sorted(dict2.items(),key=lambda x:x[1])
sorted(dict2.items(), key = operator.itemgetter(1))
```

- list中选多个元素 （一直以为是list[[1,2,3]]结果发现不行。。）
so,

```
[list[i] for i in [1,2,3]]
```

- 类的定义 class

```
class Classname():#首字母大写
  def __init__(self,a,b,c):
    self.a=a
    self.b=b
    self.c=c## can be constant
  def method1(self,d):
    print(self.a + d)
#调用
Adam = Classname(1,2,3)
Adam.method1(5)
#get 6
```

- 类的继承（就粗略的看了下 暂时感觉还不是很实用）

```
class Member(Classname):
  def __int__(self,a,b,c,d):
    super().__int__(a,b,c)
    self.d = d
  def method1（self,d)：##改写父类
    print('hi world')
  def new(self, var4):
    print('dddd')
a= Member(1,2,3,4)
a.#还能继续用父类的函数 如果父类 有method2的话
```
